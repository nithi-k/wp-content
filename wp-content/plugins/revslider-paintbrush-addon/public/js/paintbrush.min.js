/**
 * @preserve
 * @author    ThemePunch <info@themepunch.com>
 * @link      http://www.themepunch.com/
 * @copyright 2018 ThemePunch
 * @version 6.7.0
 */
!function(){"use strict";if(window.SR7??={},window._tpt??={},SR7.A??={},SR7.F??={},SR7.D??={},void 0!==SR7.A.paintbrush)return;let e={pI:e=>parseInt(e),pF:e=>parseFloat(e),s:e=>String(e),b:e=>"on"===e||!0===e||1===e||"off"!==e&&!1!==e&&0!==e&&e,k:e=>e};SR7.A.paintbrush={getModuleBasics:(e={},t)=>({u:"compare"==t?void 0:e.u??e.enable??!0}),getLayerBasics:(t={},s)=>{let a="normalize"===s;return{u:"compare"==s?void 0:t.u??t.enable??!0,um:t.um??!t.mobile?.disable,fb:t.fb??t.mobile?.fallback??!1,img:{type:t.img?.type??t.image?.source??"local",src:t.img?.src??t.image?.custom??""},blur:{u:t.blur?.u??t.image?.blur?.enable??!1,b:e[a?"pI":"k"](t.blur?.b??t.image?.blur?.amount??10),fix:t.blur?.fix??t.image?.blur?.fixedges?.enable??!1,ef:e[a?"pI":"k"](t.blur?.ef??t.image?.blur?.fixedges?.amount??10)},brush:{style:t.brush?.style??"round",size:e[a?"pI":"k"](t.brush?.size??80),strength:e[a?"pI":"k"](t.brush?.strength??0),disap:t.brush?.disap??t.brush?.disappear?.enable??!1,time:e[a?"pI":"k"](t.brush?.time??t.brush?.disappear?.time??1e3)}}},init:e=>{SR7.M[e].settings.addOns.paintbrush.u&&(SR7.M[e].c.moduleListeners??={},SR7.M[e].c.moduleListeners.paintbrush??={},SR7.A.paintbrush.listeners.init(e))},prepareLayer:(e,t,s)=>{if(""+(SR7.M[e].settings?.addOns?.paintbrush?.u??!1)=="false")return;if(!t.addOns?.paintbrush?.u)return;let{c:a}=SR7.F.getLayer(s);const n=[];a.addOns??={},a.addOns.paintbrush??={TMBlock:{x:0,y:0,block:!1},brush:new SR7.F.canvas({ctx:"2d",create:!0}),canvas:new SR7.F.canvas({wrap:a.el,ctx:"2d",create:!0}),steps:[],settings:SR7.A.paintbrush.getLayerBasics(t.addOns.paintbrush,"normalize")};let i=a.addOns.paintbrush,{canvas:r}=i.canvas,o=t?.bg?.image??{};return r.style.width="100%",r.style.height="100%",r.style.zIndex=10,r.style.pointerEvents="none","main"!==t.addOns.paintbrush.img.type&&(i.iCanvas=new SR7.F.canvas({ctx:"2d",create:!0,size:o?.size??"cover",pos:o?.pos??{x:"50%",y:"50%"},repeat:o?.repeat??"no-repeat",sizeVal:o?.sizeVal??"100%"}),n.push(new Promise((e=>{_tpt.registerImage(t.addOns.paintbrush.img.src,1,(function(t){requestAnimationFrame((function(){try{i.iCanvas.image=t.image,i.iCanvas.drawImg()}catch(e){console.log(e)}e()}))}),a.el.id)})))),n},listeners:{init:e=>{let t=SR7.A.paintbrush;t.listenersAdded?.[e]||(_tpt.scrollObserver.observe(SR7.M[e].c.module),t.mouseEnter??=SR7.F.module.listeners.reg(e,_tpt.is_mobile?"touchstart":"mouseenter",((e,s)=>t.mouse.enter(e,s))),t.mouseMove??=SR7.F.module.listeners.reg(e,_tpt.is_mobile?"touchmove":"mousemove",((e,s)=>t.mouse.move(e,s))),t.onFire??={},t.onFire[e]??={},t.listenersAdded||(SR7.F.module.listeners.init(e),_tpt.resizeObserver.observe((e=>{t.resize(e)}),50,e),document.addEventListener("sr.layer.action",(function(e){if(!e.c?.addOns?.paintbrush)return;let t=e.c.addOns.paintbrush,s=t.settings;"enterstage"==e.eventtype?u(e.c,s.blur):"enteredstage"==e.eventtype?(t.source="main"!==s.img.type?t.iCanvas.canvas:e.c.canvas.canvas,t.canvas.canvas.style.display="block",SR7.A.paintbrush.onFire[e.id][e.c.el.id]=e.c,u(e.c,s.blur),o(e.c),e.c.media&&"html5"==e.c.media.player.options.type&&e.c.media.startCanvas(e.c.canvas)):"leavestage"==e.eventtype&&(u(e.c,s.blur),t.canvas.canvas.style.display="none",delete SR7.A.paintbrush.onFire[e.id][e.c.el.id])}))),t.listenersAdded??={},t.listenersAdded[e]=!0)}},paint:function(e){var t,s,a=e.steps.length,n=Date.now();let{ctx:i}=e.brush;i.lineCap=e.settings.brush.style,i.lineWidth=e.settings.brush.size;for(var r=1;r<a;r++)void 0!==e.steps[r]&&(s=(n-e.steps[r].time)/e.settings.brush.time,t=Math.max(1-s,0),i.strokeStyle="rgba(0, 0, 0, "+t+")",i.beginPath(),i.moveTo(e.steps[r-1].x,e.steps[r-1].y),i.lineTo(e.steps[r].x,e.steps[r].y),i.stroke(),0===t&&e.steps.splice(r,1))},drawBrush:function(e){if(0==(e.brush?.canvas?.width??0)||0==(e.brush?.canvas?.height??0))return;let{ctx:t,canvas:s}=e.canvas;e.frame=cancelAnimationFrame(e.frame),e.steps.length>1&&(e.frame||(e.frame=t=>{SR7.A.paintbrush.drawBrush(e,t)}),requestAnimationFrame(e.frame)),t.clearRect(0,0,s.width,s.height),e.settings.brush.disap&&e.brush.ctx.clearRect(0,0,s.width,s.height),SR7.A.paintbrush.paint(e),t.shadowColor="#000000",t.globalCompositeOperation="source-over",t.drawImage(e.source,0,0,e.source.width*_tpt.dpr,e.source.height*_tpt.dpr,0,0,s.width,s.height),t.shadowBlur=e.settings.brush.strength,t.globalCompositeOperation="destination-in",t.drawImage(e.brush.canvas,0,0,s.width,s.height,0,0,s.width,s.height),t.shadowBlur=0},resize:e=>{if(SR7.A.paintbrush.onFire)for(let t in SR7.A.paintbrush.onFire[e])_tpt.hop(SR7.A.paintbrush.onFire[e],t)&&o(SR7.A.paintbrush.onFire[e][t])},mouse:{enter:(e,s)=>{if(SR7.A.paintbrush.onFire){SR7.F.module.listeners.updateMouseCoordinates(e,s);for(let a in SR7.A.paintbrush.onFire[e]){if(!_tpt.hop(SR7.A.paintbrush.onFire[e],a))continue;let i=SR7.A.paintbrush.onFire[e][a],o=i.addOns.paintbrush;SR7.A.paintbrush.scrollY=_tpt.scrollObserver.y,o.TMBlock={x:0,y:0,block:!1},t&&(o.TMBlock=n(s.touches[0])),o.offset=r(i)}}},move:(e,s)=>{SR7.A.paintbrush.onFire&&(SR7.A.paintbrush.slideRequest&&cancelAnimationFrame(SR7.A.paintbrush.slideRequest),SR7.A.paintbrush.slideRequest=requestAnimationFrame((()=>{SR7.F.module.listeners.updateMouseCoordinates(e,s);for(let a in SR7.A.paintbrush.onFire[e]){if(!_tpt.hop(SR7.A.paintbrush.onFire[e],a))continue;let n=SR7.A.paintbrush.onFire[e][a],o=n.addOns.paintbrush;if("no"===o.TMBlock.block)return;if(t)if(o.TMBlock??=i(o.TMBlock,s?.touches?.[0]),"yes"===o.TMBlock.block)s.preventDefault();else if("no"===o.TMBlock.block)return;let u=SR7.M[e];o.offset??=r(n),o.steps.unshift({time:Date.now(),x:u.mouse.x-o.offset.x-(u.dims.moduleRect?.left??0)-u.dims.content.mwshiftx,y:u.mouse.y-o.offset.y-(u.dims.moduleRect?.top??0)}),void 0===o.frame&&SR7.A.paintbrush.drawBrush(o)}})))}}};const t="ontouchend"in document,s=Math.PI/2-.4,a=Math.PI/2+.4,n=e=>({x:e.clientX,y:e.clientY,block:!1}),i=(e,t)=>{var n=Math.abs(Math.atan2(e.y-t.clientY,e.x-t.clientX));return n>s&&n<a?"no":"yes"},r=e=>{let t=SR7.F.getParOffsets(e),s=SR7.F.getParRowMP(e.el);return{x:t.left+s.x,y:t.top+s.y}},o=e=>{if(!e.addOns?.paintbrush?.canvas)return;let t=e.addOns.paintbrush,{width:s,height:a}=e.canvas.canvas;t.brush.canvas.width=t.canvas.canvas.width=s,t.brush.canvas.height=t.canvas.canvas.height=a,t.canvas.ctx.scale(_tpt.dpr,_tpt.dpr),t.iCanvas&&(t.iCanvas.requestedWidth=s,t.iCanvas.requestedHeight=a,t.iCanvas.drawImg())},u=(e,t)=>{t?.u&&(e.canvas.canvas.style.filter="blur("+t.b+"px)",e.aCanvas?.canvas&&(e.aCanvas.canvas.style.filter="blur("+t.b+"px)"),t.fix&&(e.canvas.canvas.style.transform="scale("+(100+t.ef)+"%)",e.aCanvas?.canvas&&(e.aCanvas.canvas.style.transform="scale("+(100+t.ef)+"%)")))};_tpt.R??={},_tpt.R.paintbrush=_tpt.extend?_tpt.extend(_tpt.R.paintbrush,{status:2,version:"1.0"}):{status:2,version:"1.0"},window.dispatchEvent(new CustomEvent("SR7DuotoneFiltersReady"))}();